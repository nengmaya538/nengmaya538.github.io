

<style>
.post-list { max-width: 800px; margin: auto; }
.post-item { border-bottom: 1px solid #eee; padding: 16px 0; }
.post-title { font-size: 18px; font-weight: 600; margin: 0 0 6px; }
.post-title a { text-decoration: none; color: #111; }
.post-title a:hover { text-decoration: underline; }

.meta { margin-bottom: 6px; }
.meta a {
  display: inline-block;
  font-size: 11px;
  padding: 3px 8px;
  margin: 2px 4px 2px 0;
  border-radius: 10px;
  background: #f2f2f2;
  color: #555;
  text-decoration: none;
}
.meta a:hover {
  background: #111;
  color: #fff;
}

.excerpt { font-size: 14px; color: #444; margin: 0; }
</style>


<div class="post-list" id="postContainer">

{% for post in site.posts %}
<div class="post-item">

  <div class="post-title">
    <a href="{{ site.baseurl }}{{ post.url }}">
      {{ post.title }}
    </a>
  </div>
<p class="excerpt">
    {{ post.excerpt | strip_html | truncatewords:50 }}
  </p>
  
  <div class="meta spo">
    {% for cat in post.categories %}
      <a href="{{ site.baseurl }}/categories/?q={{ cat | slugify }}/">{{ cat }}</a>
    {% endfor %}

    {% for tag in post.tags %}
      <a href="{{ site.baseurl }}/tags/?q={{ tag | slugify }}/">#{{ tag }}</a>
    {% endfor %}

    {% for label in post.labels %}
      <a href="{{ site.baseurl }}/labels/?q={{ label | slugify }}/">{{ label }}</a>
    {% endfor %}
  </div>

  

</div>
{% endfor %}

</div>


<script>
document.addEventListener("DOMContentLoaded", function() {
  const container = document.getElementById("postContainer");
  let items = Array.from(container.children);

  // Ambil kategori utama dari setiap post
  items = items.map(item => {
    const firstCategory = item.querySelector(".meta a");
    return {
      element: item,
      category: firstCategory ? firstCategory.textContent.trim() : ""
    };
  });

  // Shuffle awal
  items.sort(() => Math.random() - 0.5);

  // Susun ulang supaya tidak ada kategori sama berurutan
  const result = [];
  while (items.length > 0 && result.length < 6) {

    let foundIndex = items.findIndex(item => {
      if (result.length === 0) return true;
      return item.category !== result[result.length - 1].category;
    });

    if (foundIndex === -1) {
      foundIndex = 0; // kalau semua sisa kategori sama, paksa ambil
    }

    result.push(items.splice(foundIndex, 1)[0]);
  }

  // Render ulang
  container.innerHTML = "";
  result.forEach(item => container.appendChild(item.element));
});
</script>

